## Создание и удаление виртуальных машин в среде Ред Виртуализация

Перед началом работы со скриптом необходимо в скрипте задать переменные для подключения к API ВМ Engine:
* OVIRT_USER - имя пользователя ВМ Engine с правами администратора в формате 'admin@internal'
* OVIRT_PASS - пароль пользвателя ВМ Engine с правами администратора
* OVIRT_URL - адрес API Engine в виде "https://<hosted-engine>/ovirt-engine/api" где <hosted-engine> - FQDN менеджера виртуализации

Скрипт предназначен для массового создания ВМ из готовых шаблонов и удаления ВМ. 
Диски ВМ возможно создать в двух вариантах:  
* Толстые. В данном случае возможно выбрать произвольный домен хранения (отличный от домена шаблона ВМ)
* Тонкие. В данном случае диски ВМ создаются в том же домене хранения, что и диски шаблона.

Скрипт запускается из командной строки без аргументов. Работает в интерактивном режиме:
* После запуска скрипта выбрать режим работы. c -создание ВМ, d - удаление.
* Если выбран режим создания 'c', то далее будет предложено выбрать номер кластера, в котором необходимо создать ВМ.
* Выбрать номер шаблона с которого будут созданы ВМ.
* Выбрать домен хранения. **Вариант 1)** Для создания толстых дисков необходимо в явном виде указать номер домен, где будут размещены диски создаваемых ВМ (Внимание! Создание толстых дисков может занимать продолжительное время). **Вариант 2)** Для создания тонких дисков следует указать '0', в этом случае диски будут размещены в том же домене хранения, что и диски шаблона.
* Задать требуемое количество CPU.
* Задать требуемыой объем оперативной памяти в ГБ.
* Задать требуемое количество ВМ.
* Здать перфикс создаваемых ВМ. Например, при задании префикса 'test' будут созданы ВМ с именами test-1, test-2 и т.д. Если в системе с указанным префиксом уже существуют ВМ, то при создании новых ВМ будет продолжена нумерация, начиная от ВМ с максимальным цифровым индексом.
* Указать 'y' для переименования дисков создаваемой ВМ в соответствии с указанным префиксом ВМ или 'n' для сохранения имен дисков из шаблона.
* После создания ВМ выбрать 'y' для включения созданных ВМ или 'n' - оставить выключенными.
* Нажать Enter для выхода из скрипта.

**Внимание: создание толстых дисков может занять продолжительное время и завсит от объема дисков.**

Работоспособность скрипта протестирована с версией "Ред Виртуализация 7.3" (oVirt 4.4)

---
